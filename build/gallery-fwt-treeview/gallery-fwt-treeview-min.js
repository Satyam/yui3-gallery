YUI.add("gallery-fwt-treeview",function(e,t){"use strict";var n=e.Lang,r=e.ClassNameManager.getClassName,i=function(e){return r("fw-treeview",e)},s={toggle:i("toggle"),icon:i("icon"),selection:i("selection"),content:i("content"),sel_prefix:i("selected-state")},o="contentBox",u=0,a=1,f=2;e.FWTreeView=e.Base.create("fw-treeview",e.Widget,[e.FlyweightTreeManager],{initializer:function(e){this._domEvents=["click"],this._loadConfig(e.tree)},renderUI:function(){this.get(o).setContent(this._getHTML())},CONTENT_TEMPLATE:"<ul></ul>"},{ATTRS:{defaultType:{value:"FWTreeNode"},toggleOnLabelClick:{value:!1,validator:n.isBoolean}}}),e.FWTreeNode=e.Base.create("fw-treenode",e.FlyweightTreeNode,[],{initializer:function(){this.after("click",this._afterClick,this),this.after("selectedChange",this._afterSelectedChange,this)},_afterClick:function(e){var t=e.domEvent.target;t.hasClass(s.toggle)?this.toggle():t.hasClass(s.selection)?this.toggleSelection():(t.hasClass(s.content)||t.hasClass(s.icon))&&this.get("root").get("toggleOnLabelClick")&&this.toggle()},toggleSelection:function(){this.set("selected",this.get("selected")?u:f)},_afterSelectedChange:function(t){var n=t.newVal;this.isRoot()||(e.one("#"+this.get("id")).replaceClass("yui3-fw-treeview-selected-state-"+t.prevVal,"yui3-fw-treeview-selected-state-"+n),this.get("propagateUp")&&t.src!=="propagatingDown"&&this.getParent()._childSelectedChange().release()),this.get("propagateDown")&&t.src!=="propagatingUp"&&this.forSomeChildren(function(e){e.set("selected",n,"propagatingDown")})},_dynamicLoadReturn:function(){e.FWTreeNode.superclass._dynamicLoadReturn.apply(this,arguments);if(this.get("propagateDown")){var t=this.get("selected");this.forSomeChildren(function(e){e.set("selected",t,"propagatingDown")})}},_childSelectedChange:function(){var e=0,t=0;return this.forSomeChildren(function(n){e+=2,t+=n.get("selected")}),this.set("selected",t===0?u:t===e?f:a,{src:"propagatingUp"}),this}},{TEMPLATE:n.sub('<li id="{id}" class="{cname_node} {sel_prefix}-{selected}"><div class="{toggle}"></div><div class="{icon}"></div><div class="{selection}"></div><div class="{content}">{label}</div><ul class="{cname_children}">{children}</ul></li>',s),NOT_SELECTED:u,PARTIALLY_SELECTED:a,FULLY_SELECTED:f,ATTRS:{selected:{value:u,validator:function(e){return e===u||e===f||e===a}},propagateUp:{value:!0,validator:n.isBoolean},propagateDown:{value:!0,validator:n.isBoolean}}})},"@VERSION@",{requires:["gallery-flyweight-tree","widget","base-build"],skinnable:!0});
